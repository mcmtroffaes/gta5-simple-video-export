# gta5-simple-video-export

[![Build status](https://ci.appveyor.com/api/projects/status/0jn75yf5xmq2kipy?svg=true)](https://ci.appveyor.com/project/mcmtroffaes/gta5-simple-video-export)

A simple plugin to improve the quality of videos exported from the GTAV video editor.

The plugin hooks into the media foundation to capture audio and video frames
generated by the video editor.
It will then produce exactly the same video as the editor would produce,
but with custom encoding settings.
This enables much higher quality exports than what the game supports.

Build
-----

The project can be built with Visual Studio using cmake and vcpkg.
For a list of vcpkg dependencies,
please refer to the
[appveyor build script](https://github.com/mcmtroffaes/gta5-simple-video-export/blob/master/appveyor.yml).
This script also contains instructions for building from command line.

Installation
------------

The plugin requires an [asi loader](https://github.com/ThirteenAG/Ultimate-ASI-Loader).
If you have already installed [ScriptHookV](http://www.dev-c.com/gtav/scripthookv/)
then you already have it (it is the ``dinput8.dll`` file).

Once you have an asi loader,
just put the ``SimpleVideoExport.asi`` and ``SimpleVideoExport.ini`` files into the root of your game folder
(or whichever folder that you have configured for your asi loader),
and you are good to go.

Optionally, you may put
``SimpleVideoExportTest.exe`` and ``SimpleVideoExportTest.ini``
into the same folder.
Running ``SimpleVideoExportTest.exe`` will create a test export file.
This allows you to verify that
your encoder settings in ``SimpleVideoExport.ini`` are working properly,
without having to start the game.

Configuration
-------------

All settings can be configured from ``SimpleVideoExport.ini``.
The settings are documented and should be self-explanatory.

By default, the plugin will export lossless
using ffv1 and flac in an mkv container.
Videos are exported to the default Windows media folder for videos,
but you can also change this in the ini file.

You can change the preset, or create your own preset by adding
a section to the ini file.
Codecs are given by their name,
followed by any options separated by spaces.
Use a colon (:) to specify option values.
You can find a list of all codecs and options
in the [official ffmpeg documentation](https://ffmpeg.org/ffmpeg-codecs.html).
Most codecs are supported, except GPL and non-free ones,
and a few that depend on external libraries.

Limitations
-----------

Unfortunately, the media foundation as used within GTAV
does not support resolutions over 1080p.
That limitation is carried over to this plugin.
If you need higher resolution exports,
I recommend you look at
[extended video export](https://github.com/ali-alidoust/gta5-extended-video-export) instead,
which hooks into DirectX instead, allowing native resolution exports.

For licensing reasons, non-free and GPL licensed codecs cannot be included with the plugin.
This includes the popular x264 encoder.
If you wish to encode with x264, first encode to a lossless format (such as ffv1),
then encode to x264 with a build of ffmpeg that supports x264.
